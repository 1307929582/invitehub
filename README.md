# ChatGPT Team è‡ªåŠ©ä¸Šè½¦ç³»ç»Ÿ

ä¼ä¸šçº§ ChatGPT Team é›†ä¸­ç®¡ç†å¹³å°ï¼Œæ”¯æŒç”¨æˆ·è‡ªåŠ©ç”³è¯·ã€å…‘æ¢ç åˆ†å‘ã€LinuxDO OAuth ç™»å½•ã€æ‰¹é‡é‚€è¯·ã€æˆå‘˜åŒæ­¥ã€æ“ä½œå®¡è®¡ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·ç«¯
- ğŸ« **å…‘æ¢ç ä¸Šè½¦** - ç”¨æˆ·ä½¿ç”¨å…‘æ¢ç è‡ªåŠ©åŠ å…¥ Team
- ğŸ” **LinuxDO ç™»å½•** - é›†æˆ LinuxDO OAuth è®¤è¯
- ğŸ“Š **åº§ä½ç»Ÿè®¡** - å®æ—¶æ˜¾ç¤ºå¯ç”¨åº§ä½ã€å¾…æ¥å—é‚€è¯·æ•°
- ğŸ¯ **è‡ªåŠ¨åˆ†é…** - æ™ºèƒ½åˆ†é…åˆ°æœªæ»¡çš„ Team

### ç®¡ç†ç«¯
- ğŸ‘¥ **å¤š Team ç®¡ç†** - é›†ä¸­ç®¡ç†å¤šä¸ª ChatGPT Team
- ğŸŸï¸ **å…‘æ¢ç ç³»ç»Ÿ** - æ‰¹é‡ç”Ÿæˆã€ç®¡ç†å…‘æ¢ç 
- ğŸ“§ **æ‰¹é‡é‚€è¯·** - ä¸€é”®é‚€è¯·å¤šä¸ªç”¨æˆ·
- ğŸ”„ **æˆå‘˜åŒæ­¥** - è‡ªåŠ¨åŒæ­¥ Team æˆå‘˜åˆ—è¡¨
- ğŸ“ˆ **æ•°æ®ç»Ÿè®¡** - Dashboard å±•ç¤ºå…³é”®æŒ‡æ ‡
- ğŸ“ **æ“ä½œæ—¥å¿—** - å®Œæ•´çš„å®¡è®¡æ—¥å¿—
- âš™ï¸ **ç³»ç»Ÿé…ç½®** - LinuxDO OAuthã€åº§ä½ç®¡ç†ç­‰

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”œâ”€â”€ backend/          # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ routers/  # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ setup.py      # åˆå§‹åŒ–è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ public.py     # å…¬å¼€ APIï¼ˆç”¨æˆ·ç«¯ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py       # è®¤è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ teams.py      # Team ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ redeem.py     # å…‘æ¢ç ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py     # ç³»ç»Ÿé…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ dashboard.py  # æ•°æ®ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ services/ # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py       # JWT è®¤è¯
â”‚   â”‚   â”‚   â””â”€â”€ chatgpt_api.py # ChatGPT API å°è£…
â”‚   â”‚   â”œâ”€â”€ models.py # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ database.py # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/         # React + TypeScript + Ant Design
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/    # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Setup.tsx     # åˆå§‹åŒ–è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx      # ç”¨æˆ·é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Callback.tsx  # OAuth å›è°ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.tsx     # ç®¡ç†å‘˜ç™»å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx # ç®¡ç†åå°é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Teams.tsx     # Team ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ RedeemCodes.tsx # å…‘æ¢ç ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ LinuxDOUsers.tsx # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ Settings.tsx  # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â”œâ”€â”€ api/      # API å°è£…
â”‚   â”‚   â””â”€â”€ store/    # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ docs/             # æ–‡æ¡£
â”‚   â”œâ”€â”€ TOKEN_GUIDE.md    # Token è·å–æŒ‡å—
â”‚   â”œâ”€â”€ SECURITY.md       # å®‰å…¨è¯´æ˜
â”‚   â””â”€â”€ DEPLOYMENT.md     # éƒ¨ç½²æŒ‡å—
â””â”€â”€ docker-compose.yml
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/ä½ çš„ç”¨æˆ·å/chatgpt-team-manager.git
cd chatgpt-team-manager

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d --build

# 3. è®¿é—®ç³»ç»Ÿ
# ç”¨æˆ·ç«¯: http://localhost:3456
# ç®¡ç†åå°: http://localhost:3456/admin
# API æ–‡æ¡£: http://localhost:4567/docs
```

### æœ¬åœ°å¼€å‘

```bash
# åç«¯
cd backend
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 4567

# å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev  # é»˜è®¤ç«¯å£ 3456
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. é¦–æ¬¡éƒ¨ç½² - ç³»ç»Ÿåˆå§‹åŒ–

é¦–æ¬¡è®¿é—®ä¼šè‡ªåŠ¨è·³è½¬åˆ°åˆå§‹åŒ–é¡µé¢ï¼š

1. è®¿é—® http://your-domain.com
2. å¡«å†™ç®¡ç†å‘˜ä¿¡æ¯ï¼š
   - ç”¨æˆ·åï¼ˆè‡³å°‘3ä½ï¼‰
   - é‚®ç®±
   - å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰
3. å®Œæˆåˆå§‹åŒ–

âš ï¸ **é‡è¦**ï¼šåˆå§‹åŒ–åæ— æ³•é‡å¤è®¾ç½®ï¼Œè¯·ç‰¢è®°ç®¡ç†å‘˜è´¦å·å¯†ç ï¼

### 2. é…ç½® LinuxDO OAuth

ç™»å½•ç®¡ç†åå°åï¼š

1. è¿›å…¥ã€Œç³»ç»Ÿè®¾ç½®ã€é¡µé¢
2. é…ç½® LinuxDO OAuthï¼š
   - Client ID
   - Client Secret
   - Redirect URIï¼ˆå¦‚ï¼š`https://your-domain.com/callback`ï¼‰
3. ä¿å­˜é…ç½®

### 3. æ·»åŠ  Team

1. è¿›å…¥ã€ŒTeam ç®¡ç†ã€
2. ç‚¹å‡»ã€Œæ·»åŠ  Teamã€
3. å¡«å†™ä¿¡æ¯ï¼š
   - Team åç§°
   - Account ID
   - Session Token
   - Device IDï¼ˆå¯é€‰ï¼‰
   - æœ€å¤§åº§ä½æ•°ï¼ˆé»˜è®¤50ï¼‰
4. ç³»ç»Ÿè‡ªåŠ¨éªŒè¯ Token

ğŸ“– å‚è€ƒ [Token è·å–æŒ‡å—](docs/TOKEN_GUIDE.md)

### 4. ç”Ÿæˆå…‘æ¢ç 

1. è¿›å…¥ã€Œå…‘æ¢ç ç®¡ç†ã€
2. ç‚¹å‡»ã€Œæ‰¹é‡ç”Ÿæˆã€
3. è®¾ç½®å‚æ•°ï¼š
   - ä½¿ç”¨æ¬¡æ•°ï¼ˆæ¯ä¸ªç å¯ç”¨æ¬¡æ•°ï¼‰
   - æœ‰æ•ˆæœŸï¼ˆå¤©æ•°ï¼‰
   - ç”Ÿæˆæ•°é‡
4. å¤åˆ¶å…‘æ¢ç åˆ†å‘ç»™ç”¨æˆ·

### 5. ç”¨æˆ·ä½¿ç”¨æµç¨‹

ç”¨æˆ·è®¿é—®é¦–é¡µï¼š

1. ç‚¹å‡»ã€Œä½¿ç”¨ LinuxDO ç™»å½•ã€
2. æˆæƒåè¿”å›
3. è¾“å…¥é‚®ç®±å’Œå…‘æ¢ç 
4. ç³»ç»Ÿè‡ªåŠ¨åˆ†é…åˆ°æœªæ»¡çš„ Team
5. æŸ¥æ”¶é‚®ç®±æ¥å—é‚€è¯·

### 6. ç®¡ç†å‘˜åŠŸèƒ½

- **Dashboard**ï¼šæŸ¥çœ‹ç»Ÿè®¡æ•°æ®ã€åº§ä½ä½¿ç”¨æƒ…å†µ
- **Team ç®¡ç†**ï¼šæ·»åŠ /ç¼–è¾‘/åˆ é™¤ Teamï¼ŒåŒæ­¥æˆå‘˜
- **æ‰¹é‡é‚€è¯·**ï¼šæ‰‹åŠ¨æ‰¹é‡é‚€è¯·ç”¨æˆ·
- **å…‘æ¢ç ç®¡ç†**ï¼šç”Ÿæˆã€æŸ¥çœ‹ã€ç¦ç”¨å…‘æ¢ç 
- **ç”¨æˆ·ç®¡ç†**ï¼šæŸ¥çœ‹ LinuxDO ç”¨æˆ·åˆ—è¡¨å’Œé‚€è¯·è®°å½•
- **æ“ä½œæ—¥å¿—**ï¼šæŸ¥çœ‹æ‰€æœ‰æ“ä½œè®°å½•
- **ç³»ç»Ÿè®¾ç½®**ï¼šé…ç½® OAuthã€æŸ¥çœ‹åº§ä½ç»Ÿè®¡

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… JWT Token è®¤è¯ï¼Œ7å¤©æœ‰æ•ˆæœŸ
- âœ… å¯†ç  bcrypt åŠ å¯†å­˜å‚¨
- âœ… é¦–æ¬¡éƒ¨ç½²å¼ºåˆ¶åˆå§‹åŒ–è®¾ç½®
- âœ… æ‰€æœ‰ç®¡ç†æ¥å£éœ€è¦è®¤è¯
- âœ… å…‘æ¢ç é˜²æš´åŠ›ç ´è§£ï¼ˆ5åˆ†é’Ÿå†…æœ€å¤š5æ¬¡ï¼‰
- âœ… å‰ç«¯è·¯ç”±å®ˆå«
- âœ… CORS é…ç½®
- âœ… æ•æ„Ÿæ•°æ®ä¸æš´éœ²åœ¨ API å“åº”ä¸­

è¯¦è§ [å®‰å…¨è¯´æ˜](docs/SECURITY.md)

## ğŸ“¦ ç”Ÿäº§éƒ¨ç½²

è¯¦è§ [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)

### å¿«é€Ÿéƒ¨ç½²æ¸…å•

1. âœ… é…ç½®åŸŸåå’Œ SSL è¯ä¹¦
2. âœ… ä¿®æ”¹ CORS é…ç½®ä¸ºç”Ÿäº§åŸŸå
3. âœ… é…ç½® Nginx åå‘ä»£ç†
4. âœ… è®¾ç½®é˜²ç«å¢™è§„åˆ™
5. âœ… é…ç½®å®šæœŸæ•°æ®åº“å¤‡ä»½
6. âœ… åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·
7. âœ… é…ç½® LinuxDO OAuth

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- FastAPI - ç°ä»£åŒ– Python Web æ¡†æ¶
- SQLAlchemy - ORM
- SQLite - æ•°æ®åº“ï¼ˆå¯è¿ç§»åˆ° PostgreSQLï¼‰
- JWT - è®¤è¯
- bcrypt - å¯†ç åŠ å¯†
- httpx - HTTP å®¢æˆ·ç«¯

### å‰ç«¯
- React 18 - UI æ¡†æ¶
- TypeScript - ç±»å‹å®‰å…¨
- Ant Design - UI ç»„ä»¶åº“
- React Router - è·¯ç”±
- Zustand - çŠ¶æ€ç®¡ç†
- Axios - HTTP å®¢æˆ·ç«¯
- Vite - æ„å»ºå·¥å…·

## ğŸ“Š æ•°æ®åº“è®¾è®¡

- **users** - ç®¡ç†å‘˜ç”¨æˆ·
- **teams** - ChatGPT Team é…ç½®
- **team_members** - Team æˆå‘˜ç¼“å­˜
- **invite_records** - é‚€è¯·è®°å½•
- **redeem_codes** - å…‘æ¢ç 
- **linuxdo_users** - LinuxDO ç”¨æˆ·
- **system_configs** - ç³»ç»Ÿé…ç½®
- **operation_logs** - æ“ä½œæ—¥å¿—

## ğŸ”§ ç¯å¢ƒå˜é‡

åˆ›å»º `backend/.env`ï¼ˆå¯é€‰ï¼‰ï¼š

```env
# æ•°æ®åº“
DATABASE_URL=sqlite:///./data/app.db

# JWTï¼ˆä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰
SECRET_KEY=your-random-secret-key

# CORS
CORS_ORIGINS=["https://your-domain.com"]
```

## ğŸ“ API æ–‡æ¡£

å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:4567/docs

### å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰
- `GET /api/v1/setup/status` - ç³»ç»Ÿåˆå§‹åŒ–çŠ¶æ€
- `POST /api/v1/setup/initialize` - åˆå§‹åŒ–ç³»ç»Ÿ
- `GET /api/v1/public/linuxdo/auth` - è·å– OAuth URL
- `POST /api/v1/public/linuxdo/callback` - OAuth å›è°ƒ
- `POST /api/v1/public/redeem` - ä½¿ç”¨å…‘æ¢ç 
- `GET /api/v1/public/seats` - åº§ä½ç»Ÿè®¡

### ç®¡ç†æ¥å£ï¼ˆéœ€è¦ JWT Tokenï¼‰
- `/api/v1/auth/*` - è®¤è¯ç®¡ç†
- `/api/v1/teams/*` - Team ç®¡ç†
- `/api/v1/dashboard/*` - æ•°æ®ç»Ÿè®¡
- `/api/v1/redeem-codes/*` - å…‘æ¢ç ç®¡ç†
- `/api/v1/config/*` - ç³»ç»Ÿé…ç½®
- `/api/v1/linuxdo-users/*` - ç”¨æˆ·ç®¡ç†

## âš ï¸ æ³¨æ„äº‹é¡¹

- Session Token æœ‰æ•ˆæœŸçº¦ 7-30 å¤©ï¼Œè¿‡æœŸéœ€æ›´æ–°
- æ‰¹é‡é‚€è¯·å·²å†…ç½® 1 ç§’é—´éš”ï¼Œé¿å…è§¦å‘ Rate Limit
- ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS
- å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶
- ä¸è¦å°† `.env` å’Œ `data/` ç›®å½•ä¸Šä¼ åˆ° Git

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT License

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/)
- [Ant Design](https://ant.design/)
- [LinuxDO](https://linux.do/)
